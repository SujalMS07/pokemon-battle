<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pokémon Battle Arena</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Trebuchet MS', sans-serif;
}

body {
    height: 100vh;
    width: 100vw;
    background: linear-gradient(to bottom, #1a1a1a, #333333);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    color: white;
    position: relative;
    overflow: hidden;
}

/* HP Bars Top */
.hp-bar-container {
    width: 200px;
    height: 20px;
    background: rgba(255,255,255,0.2);
    border-radius: 10px;
    overflow: hidden;
    margin: 10px;
}

.hp-bar {
    height: 100%;
    background: linear-gradient(to right, #0f0, #ff0, #f00);
    width: 100%;
    transition: width 0.5s ease;
}

/* Pokémon Centered */
.pokemon-container {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    gap: 200px;
    margin-top: 50px;
    flex-wrap: wrap;
}

.pokemon-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.pokemon {
    width: 180px;
    transition: transform 0.3s;
    filter: drop-shadow(0 10px 15px rgba(0,0,0,0.5));
}

.pokemon.player {
    transform: scaleX(1);
}

.pokemon.enemy {
    transform: scaleX(-1);
}

/* Battle Buttons */
.battle-panel {
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 50px;
    flex-wrap: wrap;
}

button.move-btn {
    padding: 12px 30px;
    border: none;
    border-radius: 20px;
    font-size: 1rem;
    cursor: pointer;
    background: #ffd700;
    color: #000;
    box-shadow: 0 0 15px #ffd700;
    transition: 0.3s;
}

button.move-btn:hover {
    transform: scale(1.1);
}

/* Attack Text */
.attack-text {
    position: absolute;
    top: 35%;
    font-size: 2rem;
    font-weight: bold;
    color: #ffea00;
    text-shadow: 0 0 15px #ffea00;
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
}

/* Restart Button */
#restartBtn {
    display: none;
    padding: 15px 40px;
    font-size: 1.2rem;
    border-radius: 25px;
    border: none;
    background: #ff4500;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 15px #ff4500;
    margin-bottom: 20px;
    transition: 0.3s;
}

#restartBtn:hover {
    transform: scale(1.05);
}
</style>
</head>

<body>

<!-- Pokémon & HP -->
<div class="pokemon-container">
    <div class="pokemon-wrapper">
        <div>Player</div>
        <div class="hp-bar-container">
            <div id="playerHP" class="hp-bar"></div>
        </div>
        <img id="playerImg" class="pokemon player" src="" alt="Player Pokémon">
    </div>

    <div class="pokemon-wrapper">
        <div>Enemy</div>
        <div class="hp-bar-container">
            <div id="enemyHP" class="hp-bar"></div>
        </div>
        <img id="enemyImg" class="pokemon enemy" src="" alt="Enemy Pokémon">
    </div>
</div>

<!-- Battle Buttons -->
<div class="battle-panel">
    <button class="move-btn" data-move="attack">Attack</button>
    <button class="move-btn" data-move="special">Special</button>
    <button class="move-btn" data-move="defend">Defend</button>
</div>

<!-- Attack Text -->
<div class="attack-text" id="attackText">Attack!</div>

<!-- Restart Button -->
<button id="restartBtn" onclick="location.reload()">Restart Game</button>

<!-- Background Music -->
<audio id="bgAudio" src="pokemon-theme.mp3" loop autoplay></audio>

<script>
// ===== Pokémon Data =====
const pokemons = {
    pikachu: { name: "Pikachu", type: "electric", img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png" },
    charmander: { name: "Charmander", type: "fire", img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png" },
    squirtle: { name: "Squirtle", type: "water", img: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png" }
};

// ===== Initialize =====
let playerKey = localStorage.getItem("starterPokemon") || "pikachu";
let enemyKeys = Object.keys(pokemons).filter(k => k !== playerKey);
let enemyKey = enemyKeys[Math.floor(Math.random() * enemyKeys.length)];

let playerHP = 100;
let enemyHP = 100;

// ===== Elements =====
const playerImg = document.getElementById("playerImg");
const enemyImg = document.getElementById("enemyImg");
const playerHPBar = document.getElementById("playerHP");
const enemyHPBar = document.getElementById("enemyHP");
const attackText = document.getElementById("attackText");
const buttons = document.querySelectorAll(".move-btn");
const restartBtn = document.getElementById("restartBtn");

// Set Images
playerImg.src = pokemons[playerKey].img;
enemyImg.src = pokemons[enemyKey].img;

const playerPokemon = pokemons[playerKey];
const enemyPokemon = pokemons[enemyKey];

// ===== Helper Functions =====
function typeAdvantage(attacker, defender){
    if(attacker=="electric" && defender=="water") return 1;
    if(attacker=="water" && defender=="fire") return 1;
    if(attacker=="fire" && defender=="electric") return 1;
    if(attacker=="water" && defender=="electric") return -1;
    if(attacker=="fire" && defender=="water") return -1;
    if(attacker=="electric" && defender=="fire") return -1;
    return 0;
}

function updateHP(){
    playerHPBar.style.width = playerHP + "%";
    enemyHPBar.style.width = enemyHP + "%";
}

// ===== Perform Move =====
function performMove(attacker, defender, move){
    let damage = 0;
    if(move==="attack") damage = Math.floor(Math.random()*10)+10;
    if(move==="special") damage = Math.floor(Math.random()*15)+15;
    if(move==="defend") return;

    let adv = typeAdvantage(attacker.type, defender.type);
    damage += adv*5;

    if(defender===playerPokemon) playerHP -= damage;
    else enemyHP -= damage;

    if(playerHP<0) playerHP=0;
    if(enemyHP<0) enemyHP=0;
    updateHP();

    attackText.innerText = attacker.name + " used " + move.toUpperCase() + "!";
    attackText.style.opacity = 1;
    setTimeout(()=>{ attackText.style.opacity=0; }, 800);
}

// ===== Player Move =====
buttons.forEach(btn=>{
    btn.addEventListener("click", ()=>{
        let move = btn.dataset.move;
        performMove(playerPokemon, enemyPokemon, move);
        checkGameOver();
        setTimeout(enemyTurn, 1000);
    });
});

// ===== Enemy Move =====
function enemyTurn(){
    let moves = ["attack","special","defend"];
    let move = moves[Math.floor(Math.random()*moves.length)];
    performMove(enemyPokemon, playerPokemon, move);
    checkGameOver();
}

// ===== Check Game Over =====
function checkGameOver(){
    if(playerHP<=0){
        attackText.innerText = "You Lose!";
        attackText.style.opacity = 1;
        disableButtons();
        restartBtn.style.display = "block";
    }
    if(enemyHP<=0){
        attackText.innerText = "You Win!";
        attackText.style.opacity = 1;
        disableButtons();
        restartBtn.style.display = "block";
    }
}

function disableButtons(){
    buttons.forEach(b => b.disabled=true);
}
</script>

</body>
</html>


